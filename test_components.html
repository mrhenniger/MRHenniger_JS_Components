<!DOCTYPE html>
<html lang="en">
<head class="theHead">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MRHenniger JS Utilities - Test: Strings</title>
    <link rel="stylesheet" type="text/css" href="css/basic.css">
    <script src="../MRHenniger_JS_Utilities/strings.js"></script>
    <script src="../MRHenniger_JS_Utilities/dom.js"></script>
    <script src="../MRHenniger_JS_Utilities/domCollection.js"></script>
    <!-- <script src="files.js"></script> -->
    <script src="../MRHenniger_JS_Utilities/promises.js"></script>
    <script src="../MRHenniger_JS_Utilities/components.js"></script>
    <!-- <script src="ComponentsTest.js"></script> -->
    <script src="../MRHenniger_JS_Utilities/testUtilities.js"></script>

    <link rel="stylesheet" type="text/css" href="../MRHenniger_JS_Utilities/basic.css">

    <script src="src/CenterText.js"></script>
    <link rel="stylesheet" type="text/css" href="src/CenterText.css">
    <script src="src/SwitchBinary.js"></script>
    <link rel="stylesheet" type="text/css" href="src/SwitchBinary.css">
    <script src="src/InputText.js"></script>
    <link rel="stylesheet" type="text/css" href="src/InputText.css">
    <script>
        customElements.define("center-text", CenterText);
        customElements.define("switch-binary", SwitchBinary);
        customElements.define("input-text", InputText);

        function pageLoaded() {
            testLabel('Component Creation');
            let body = new Dom('body');
            let scratch = body.find('.theScratch').first();
            scratch.innerHTMLWipe();

            scratch.innerHTML(`<div class="container"></div>`);
            let container = scratch.find('.container').first();
            container.css('width', '200px').css('height', '100px');//.css('border', '1px solid red');



            // Center Text
            //=============

            container.innerHTMLWipe();
            container.innerHTML(`<center-text style="dark">dom created 1</center-text>`);
            let subjectDom = container.find('center-text').first();
            let subjectObj = new CenterText(null, null, subjectDom);
            testCompare("Test CT1a - CenterText", 'dom created 1', subjectDom.find('.inner').first().innerHTML().str());
            subjectObj.reviseData({"txt": "revised 1"});
            testCompare("Test CT1b - CenterText", 'revised 1', subjectDom.find('.inner').first().innerHTML().str());

            container.innerHTMLWipe();
            container.innerHTML(`<center-text/>`);
            subjectDom = container.find('center-text').first();
            subjectObj = new CenterText(null, null, subjectDom);
            testCompare("Test CT2a - CenterText", '', subjectDom.find('.inner').first().innerHTML().str());
            subjectObj.reviseData({"txt": "revised 2"});
            subjectObj.getCore().addClass('ct-medium');
            testCompare("Test CT2b - CenterText", "revised 2", subjectDom.find('.inner').first().innerHTML().str());

            container.innerHTMLWipe();
            subjectObj = new CenterText(container, {"txt": "js created", "style": "dark"});
            subjectDom = subjectObj.getCore();
            testCompare("Test CT3a - CenterText", 'js created', subjectDom.find('.inner').first().innerHTML().str());
            subjectObj.reviseData({"txt": "revised"});
            testCompare("Test CT3b - CenterText", 'revised', subjectDom.find('.inner').first().innerHTML().str());



            // Switch Binary
            //=============== <switch-binary class="aBcDeFgHiJ" state="on" size="medium" style="blue" ontxt="O" offtxt="X"></switch-binary>

            // Test states
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary state="on"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB1a - Switch Binary State On", true, subjectDom.hasClass('stateon'));
            testCompare("Test SB1b - Switch Binary State On", false, subjectDom.hasClass('sb-small'));
            testCompare("Test SB1c - Switch Binary State On", true,  subjectDom.hasClass('sb-medium'));
            testCompare("Test SB1d - Switch Binary State On", false, subjectDom.hasClass('sb-large'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary state="off"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB1e - Switch Binary State Off", true, subjectDom.hasClass('stateoff'));
            testCompare("Test SB1f - Switch Binary State On", false, subjectDom.hasClass('sb-small'));
            testCompare("Test SB1g - Switch Binary State On", true,  subjectDom.hasClass('sb-medium'));
            testCompare("Test SB1h - Switch Binary State On", false, subjectDom.hasClass('sb-large'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB1i - Switch Binary State Default", true, subjectDom.hasClass('stateoff'));
            testCompare("Test SB1j - Switch Binary State On", false, subjectDom.hasClass('sb-small'));
            testCompare("Test SB1k - Switch Binary State On", true,  subjectDom.hasClass('sb-medium'));
            testCompare("Test SB1l - Switch Binary State On", false, subjectDom.hasClass('sb-large'));

            // Test size
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary size="sb-small"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2a - Switch Binary Size Small",  true,  subjectDom.hasClass('sb-small'));
            testCompare("Test SB2b - Switch Binary Size Small",  false, subjectDom.hasClass('sb-medium'));
            testCompare("Test SB2c - Switch Binary State Small", false, subjectDom.hasClass('sb-large'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary size="medium"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2d - Switch Binary Size Medium",  false,  subjectDom.hasClass('sb-small'));
            testCompare("Test SB2e - Switch Binary Size Medium",  true,   subjectDom.hasClass('sb-medium'));
            testCompare("Test SB2f - Switch Binary State Medium", false,  subjectDom.hasClass('sb-large'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary size="sb-large"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2g - Switch Binary Size Large",  false,  subjectDom.hasClass('sb-small'));
            testCompare("Test SB2h - Switch Binary Size Large",  false,  subjectDom.hasClass('sb-medium'));
            testCompare("Test SB2i - Switch Binary State Large", true,   subjectDom.hasClass('sb-large'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2j - Switch Binary Size Default",  false,  subjectDom.hasClass('sb-small'));
            testCompare("Test SB2k - Switch Binary Size Default",  true,   subjectDom.hasClass('sb-medium'));
            testCompare("Test SB2l - Switch Binary State Default", false,  subjectDom.hasClass('sb-large'));

            // Test style
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary style="sb-blue"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2a - Switch Binary Style Blue", true,  subjectDom.hasClass('sb-blue'));
            testCompare("Test SB2b - Switch Binary Style Blue", false, subjectDom.hasClass('sb-red'));
            testCompare("Test SB2c - Switch Binary Style Blue", false, subjectDom.hasClass('sb-grey'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary style="red"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2d - Switch Binary Style Red", false, subjectDom.hasClass('sb-blue'));
            testCompare("Test SB2e - Switch Binary Size Red",  true,  subjectDom.hasClass('sb-red'));
            testCompare("Test SB2f - Switch Binary State Red", false, subjectDom.hasClass('sb-grey'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary style="sb-grey"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2g - Switch Binary Style Grey", false, subjectDom.hasClass('sb-blue'));
            testCompare("Test SB2h - Switch Binary Style Grey", false, subjectDom.hasClass('sb-red'));
            testCompare("Test SB2i - Switch Binary Style Grey", true,  subjectDom.hasClass('sb-grey'));
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB2j - Switch Binary Style Default", false, subjectDom.hasClass('sb-blue'));
            testCompare("Test SB2k - Switch Binary Size Default",  false, subjectDom.hasClass('sb-red'));
            testCompare("Test SB2l - Switch Binary State Default", false, subjectDom.hasClass('sb-grey'));

            // Test texts
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary ontxt="aaa"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB3a - Switch Binary On Text", "aaa", subjectDom.find('.sb-ontxt').first().innerHTML().str());
            testCompare("Test SB3b - Switch Binary On Text", "",    subjectDom.find('.sb-offtxt').first().innerHTML().str());
            container.innerHTMLWipe();
            container.innerHTML(`<switch-binary offtxt="bbb"></switch-binary>`);
            subjectDom = container.find('switch-binary').first();
            testCompare("Test SB3c - Switch Binary Off Text", "",    subjectDom.find('.sb-ontxt').first().innerHTML().str());
            testCompare("Test SB3d - Switch Binary Off Text", "bbb", subjectDom.find('.sb-offtxt').first().innerHTML().str());

            // Insertion into the dom tested above

            // Test JS Created
            container.innerHTMLWipe();
            subjectObj = new SwitchBinary(container, {"onTxt": "aaa", "offTxt": "bbb"});
            subjectDom = subjectObj.getCore();
            testCompare("Test SB4a - Switch Binary Off JS Created", "aaa", subjectDom.find('.sb-ontxt').first().innerHTML().str());
            testCompare("Test SB4b - Switch Binary Off JS Created", "bbb", subjectDom.find('.sb-offtxt').first().innerHTML().str());



            // Input Text
            //============
            // <input-text val="abc123" req="false" ro="false" minLen="1" maxLen="10" len="5" spell="true" ph="stuff" size="it-medium" style="it-blue"/>

            container.innerHTMLWipe();
            container.innerHTML(`<input-text val="abc123" req="false" ro="false" minlen="1" maxlen="10" len="5" spell="true" ph="stuff" size="it-small" style="it-blue"/>`);
            subjectDom = container.find('input-text').first();
            let inputEle = subjectDom.find('input').first();
            testCompare("Test IT1a - Input Text - Dom Instantiated", "abc123", inputEle.att('value'));
            testCompare("Test IT1b - Input Text - Dom Instantiated", null,     inputEle.att('required'));
            testCompare("Test IT1c - Input Text - Dom Instantiated", null,     inputEle.att('readonly'));
            testCompare("Test IT1d - Input Text - Dom Instantiated", "1",      inputEle.att('minlength'));
            testCompare("Test IT1e - Input Text - Dom Instantiated", "10",     inputEle.att('maxlength'));
            testCompare("Test IT1f - Input Text - Dom Instantiated", "5",      inputEle.att('size'));
            testCompare("Test IT1g - Input Text - Dom Instantiated", "true",   inputEle.att('spellcheck'));
            testCompare("Test IT1h - Input Text - Dom Instantiated", "stuff", inputEle.att('placeholder'));
            testCompare("Test IT1i - Input Text - Dom Instantiated", true,  subjectDom.hasClass('it-small'));
            testCompare("Test IT1j - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-medium'));
            testCompare("Test IT1k - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-large'));
            testCompare("Test IT1l - Input Text - Dom Instantiated", true,  subjectDom.hasClass('it-blue'));
            testCompare("Test IT1m - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-red'));
            testCompare("Test IT1n - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-grey'));

            container.innerHTMLWipe();
            container.innerHTML(`<input-text val="123abc" req="true" ro="true" minlen="1" maxlen="10" len="5" spell="true" ph="stuff" size="it-medium" style="it-red"/>`);
            subjectDom = container.find('input-text').first();
            inputEle = subjectDom.find('input').first();
            testCompare("Test IT2a - Input Text - Dom Instantiated", "123abc", inputEle.att('value'));
            testCompare("Test IT2b - Input Text - Dom Instantiated", "",       inputEle.att('required'));
            testCompare("Test IT2c - Input Text - Dom Instantiated", "",       inputEle.att('readonly'));
            testCompare("Test IT2d - Input Text - Dom Instantiated", "1",      inputEle.att('minlength'));
            testCompare("Test IT2e - Input Text - Dom Instantiated", "10",     inputEle.att('maxlength'));
            testCompare("Test IT2f - Input Text - Dom Instantiated", "5",      inputEle.att('size'));
            testCompare("Test IT2g - Input Text - Dom Instantiated", "true",   inputEle.att('spellcheck'));
            testCompare("Test IT2h - Input Text - Dom Instantiated", "stuff", inputEle.att('placeholder'));
            testCompare("Test IT2i - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-small'));
            testCompare("Test IT2j - Input Text - Dom Instantiated", true,  subjectDom.hasClass('it-medium'));
            testCompare("Test IT2k - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-large'));
            testCompare("Test IT2l - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-blue'));
            testCompare("Test IT2m - Input Text - Dom Instantiated", true,  subjectDom.hasClass('it-red'));
            testCompare("Test IT2n - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-grey'));

            container.innerHTMLWipe();
            container.innerHTML(`<input-text val="" ph="stuff" size="it-large" selectable="true" style="it-grey"/>`);
            subjectDom = container.find('input-text').first();
            inputEle = subjectDom.find('input').first();
            testCompare("Test IT3a - Input Text - Dom Instantiated", "",      inputEle.att('value'));
            testCompare("Test IT3b - Input Text - Dom Instantiated", null,    inputEle.att('required'));
            testCompare("Test IT3c - Input Text - Dom Instantiated", null,    inputEle.att('readonly'));
            testCompare("Test IT3d - Input Text - Dom Instantiated", "",      inputEle.att('minlength'));
            testCompare("Test IT3e - Input Text - Dom Instantiated", "",      inputEle.att('maxlength'));
            testCompare("Test IT3f - Input Text - Dom Instantiated", "",      inputEle.att('size'));
            testCompare("Test IT3g - Input Text - Dom Instantiated", "false", inputEle.att('spellcheck'));
            testCompare("Test IT3h - Input Text - Dom Instantiated", "stuff", inputEle.att('placeholder'));
            testCompare("Test IT3i - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-small'));
            testCompare("Test IT3j - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-medium'));
            testCompare("Test IT3k - Input Text - Dom Instantiated", true,  subjectDom.hasClass('it-large'));
            testCompare("Test IT3l - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-blue'));
            testCompare("Test IT3m - Input Text - Dom Instantiated", false, subjectDom.hasClass('it-red'));
            testCompare("Test IT3n - Input Text - Dom Instantiated", true,  subjectDom.hasClass('it-grey'));

            container.innerHTMLWipe();
            subjectObj = new InputText(container, {
                "val": "abc123",
                "req": true,
                "ro": true,
                "minLen": "1",
                "maxLen": 10,
                "len": 5,
                "spell": true,
                "ph": "placeholder stuff",
                "size": "small",
                "style": "blue"
            });
            subjectDom = subjectObj.getCore();
            testCompare("Test IT4a - Input Text - JS Instantiated", true, subjectDom.hasClass('it-small'));
            testCompare("Test IT4b - Input Text - JS Instantiated", false, subjectDom.hasClass('it-medium'));
            testCompare("Test IT4c - Input Text - JS Instantiated", false, subjectDom.hasClass('it-large'));
            testCompare("Test IT4d - Input Text - JS Instantiated", true, subjectDom.hasClass('it-blue'));
            testCompare("Test IT4e - Input Text - JS Instantiated", false, subjectDom.hasClass('it-red'));
            testCompare("Test IT4f - Input Text - JS Instantiated", false, subjectDom.hasClass('it-grey'));
            inputEle = subjectDom.find('input').first();
            testCompare("Test IT4g - Input Text - JS Instantiated", "abc123", inputEle.att('value'));
            testCompare("Test IT4h - Input Text - JS Instantiated", true, inputEle.hasAtt('required'));
            testCompare("Test IT4i - Input Text - JS Instantiated", true, inputEle.hasAtt('readonly'));
            testCompare("Test IT4j - Input Text - JS Instantiated", "1", inputEle.att('minlength'));
            testCompare("Test IT4k - Input Text - JS Instantiated", "10", inputEle.att('maxlength'));
            testCompare("Test IT4l - Input Text - JS Instantiated", "5", inputEle.att('size'));
            testCompare("Test IT4m - Input Text - JS Instantiated", "true", inputEle.att('spellcheck'));
            testCompare("Test IT4n - Input Text - JS Instantiated", "placeholder stuff", inputEle.att('placeholder'));

            container.innerHTMLWipe();
            subjectObj = new InputText(container, {
                "val": "123abc",
                "req": false,
                "ro": false,
                "minLen": "2",
                "maxLen": 20,
                "len": 10,
                "spell": false,
                "ph": "stuff goes here",
                "size": "it-large",
                "style": "it-grey"
            });
            subjectDom = subjectObj.getCore();
            testCompare("Test IT5a - Input Text - JS Instantiated", false, subjectDom.hasClass('it-small'));
            testCompare("Test IT5b - Input Text - JS Instantiated", false, subjectDom.hasClass('it-medium'));
            testCompare("Test IT5c - Input Text - JS Instantiated", true, subjectDom.hasClass('it-large'));
            testCompare("Test IT5d - Input Text - JS Instantiated", false, subjectDom.hasClass('it-blue'));
            testCompare("Test IT5e - Input Text - JS Instantiated", false, subjectDom.hasClass('it-red'));
            testCompare("Test IT5f - Input Text - JS Instantiated", true, subjectDom.hasClass('it-grey'));
            inputEle = subjectDom.find('input').first();
            testCompare("Test IT5g - Input Text - JS Instantiated", "123abc", inputEle.att('value'));
            testCompare("Test IT5h - Input Text - JS Instantiated", false, inputEle.hasAtt('required'));
            testCompare("Test IT5i - Input Text - JS Instantiated", false, inputEle.hasAtt('readonly'));
            testCompare("Test IT5j - Input Text - JS Instantiated", "2", inputEle.att('minlength'));
            testCompare("Test IT5k - Input Text - JS Instantiated", "20", inputEle.att('maxlength'));
            testCompare("Test IT5l - Input Text - JS Instantiated", "10", inputEle.att('size'));
            testCompare("Test IT5m - Input Text - JS Instantiated", "false", inputEle.att('spellcheck'));
            testCompare("Test IT5n - Input Text - JS Instantiated", "stuff goes here", inputEle.att('placeholder'));

            container.innerHTMLWipe();
            container.innerHTML('<div class="cntr">0</div>');
            subjectObj = new InputText(container, {
                "val": "a",
                "minLen": "10", "len": "15", "maxLen": "20",
                "spell": "true",
                "size": "it-large", "style": "it-grey"
            });
            subjectDom = subjectObj.getCore();
            let counterEle = container.find('.cntr').first();
            testCompare("Test IT6a - Input Text - Handlers", "0", counterEle.innerHTML().str());
            subjectObj.addHandlers({change_inner: () => {
                let counterEle = container.find('.cntr').first();
                let val = parseInt(counterEle.innerHTML().str());
                val++;
                counterEle.innerHTML(String(val));
            }});
            testCompare("Test IT6b - Input Text - Handlers", "0", counterEle.innerHTML().str());
            inputEle = subjectDom.find('.inner').first();
            inputEle.__core.value = "x";
            const simulatedEvent = new Event('change', { bubbles: false });
            inputEle.__core.dispatchEvent(simulatedEvent);
            testCompare("Test IT6b - Input Text - Handlers", "1", counterEle.innerHTML().str());
            inputEle.__core.value = "xx";
            inputEle.__core.dispatchEvent(simulatedEvent);
            testCompare("Test IT6b - Input Text - Handlers", "2", counterEle.innerHTML().str());



            // Select Dropdown
            //================

            // Test JS Creation with selection and options
            container.innerHTMLWipe();
            let opts = {"1": "Option One", "2": "Option Two"};
            subjectObj = new SelectDropdown(container, {
                options: opts,
                val: "2",
                size: "large",
                req: true
            });
            subjectDom = subjectObj.getCore();
            let selectEle = subjectDom.find('select').first();

            testCompare("Test SD1a - Select Dropdown - JS Value", "2", selectEle.val());
            testCompare("Test SD1b - Select Dropdown - JS Required", true, selectEle.hasAtt('required'));
            testCompare("Test SD1c - Select Dropdown - Default Empty Option Exist", true, subjectDom.find('option[value=""]').first() !== null);
            testCompare("Test SD1d - Select Dropdown - Option Count", 3, subjectDom.find('option').count());

            // Test DOM instantiation via attribute
            container.innerHTMLWipe();
            container.innerHTML(`<select-dropdown val="1" options='{"1":"A","2":"B"}' size="small"></select-dropdown>`);
            subjectDom = container.find('select-dropdown').first();
            subjectObj = new SelectDropdown(null, null, subjectDom);
            selectEle = subjectDom.find('select').first();

            testCompare("Test SD2a - Select Dropdown - DOM Value", "1", selectEle.val());
            testCompare("Test SD2b - Select Dropdown - DOM Style", true, subjectDom.hasClass('sd-small'));

            // Test Default selection (empty)
            container.innerHTMLWipe();
            subjectObj = new SelectDropdown(container, {options: {"a": "Apple"}});
            selectEle = subjectObj.getCore().find('select').first();
            testCompare("Test SD3a - Select Dropdown - Default Empty Selected", "", selectEle.val());







        }
    </script>
</head>
<body onload="pageLoaded();" class="theBody">

<div class="titleLine font20 fontBold fontBlack fontArial">MRHenniger JS Components - Test</div></br>
</br>
<div id="output" class="font18 fontNorm fontBlack fontArial"></div>
<div id="scratchpad" class="theScratch">initial content</div>

</body>
</html>
